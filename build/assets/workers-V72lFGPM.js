import{r,j as e}from"./index-DwvoAiy8.js";function g(){const[l,c]=r.useState([]),[p,m]=r.useState(!1),[j,x]=r.useState(!1),[n,d]=r.useState({id:"",firstname:"",lastname:"",dni:"",typeofuser:""});r.useEffect(()=>{fetch("http://localhost:3001/workers").then(t=>t.json()).then(t=>c(t)).catch(t=>console.error("Error fetching data: ",t))},[]);const a=t=>{const{name:s,value:o}=t.target;d({...n,[s]:o})},f=()=>{d({id:"",firstname:"",lastname:"",dni:"",typeofuser:""}),m(!0)},i=()=>m(!1),b=t=>{d(t),x(!0)},h=()=>x(!1),u=()=>{const t={...n,id:l.length+1};fetch("http://localhost:3001/workers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(s=>s.json()).then(s=>{c([...l,s]),i()}).catch(s=>console.error("Error inserting data: ",s))},N=()=>{fetch(`http://localhost:3001/workers/${autoincrement.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(t=>t.json()).then(t=>{const s=l.map(o=>o.id===n.id?t:o);c(s),h()}).catch(t=>console.error("Error updating data: ",t))},y=t=>{window.confirm("Do you want to delete this record?")&&fetch(`http://localhost:3001/workers/${t}`,{method:"DELETE"}).then(()=>{const s=l.filter(o=>o.id!==t);c(s)}).catch(s=>console.error("Error deleting data: ",s))};return e.jsxs("div",{className:"container mt-4",children:[e.jsx("button",{className:"btn btn-primary mb-3",onClick:f,children:"Insert New Worker"}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Firstname"}),e.jsx("th",{children:"Lastname"}),e.jsx("th",{children:"DNI"}),e.jsx("th",{children:"Type of User"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:l.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.id}),e.jsx("td",{children:t.firstname}),e.jsx("td",{children:t.lastname}),e.jsx("td",{children:t.dni}),e.jsx("td",{children:t.typeofuser}),e.jsxs("td",{children:[e.jsx("button",{className:"btn btn-success btn-sm mx-1",onClick:()=>b(t),children:"Edit"}),e.jsx("button",{className:"btn btn-danger btn-sm mx-1",onClick:()=>y(t.id),children:"Delete"})]})]},t.id))})]}),p&&e.jsx("div",{className:"modal show d-block",tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Insert Worker"}),e.jsx("button",{className:"btn-close",onClick:i})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("input",{type:"text",name:"firstname",placeholder:"Firstname",className:"form-control mb-2",onChange:a}),e.jsx("input",{type:"text",name:"lastname",placeholder:"Lastname",className:"form-control mb-2",onChange:a}),e.jsx("input",{type:"text",name:"dni",placeholder:"DNI",className:"form-control mb-2",onChange:a}),e.jsx("input",{type:"text",name:"typeofuser",placeholder:"Type of User",className:"form-control",onChange:a})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-primary",onClick:u,children:"Insert"}),e.jsx("button",{className:"btn btn-secondary",onClick:i,children:"Cancel"})]})]})})}),j&&e.jsx("div",{className:"modal show d-block",tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"Edit Worker"}),e.jsx("button",{className:"btn-close",onClick:h})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("input",{type:"text",name:"firstname",placeholder:"Firstname",className:"form-control mb-2",value:n.firstname,onChange:a}),e.jsx("input",{type:"text",name:"lastname",placeholder:"Lastname",className:"form-control mb-2",value:n.lastname,onChange:a}),e.jsx("input",{type:"text",name:"dni",placeholder:"DNI",className:"form-control mb-2",value:n.dni,onChange:a}),e.jsx("input",{type:"text",name:"typeofuser",placeholder:"Type of User",className:"form-control",value:n.typeofuser,onChange:a})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-primary",onClick:N,children:"Save"}),e.jsx("button",{className:"btn btn-secondary",onClick:h,children:"Cancel"})]})]})})})]})}export{g as default};
