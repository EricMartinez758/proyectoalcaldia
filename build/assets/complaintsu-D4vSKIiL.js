import{r as j,_ as E,R as x,a as O,c as R,P as r,b as w,j as e}from"./index-DwvoAiy8.js";import{b as S,c as h,a as I}from"./index.esm-Bf7yr9NV.js";import{C as P,c as D,a as _}from"./cil-envelope-open-CnCowPmc.js";import{C as F,a as B}from"./CRow-DaTDNMwH.js";import{C as L,a as k}from"./CCardBody-CE4h0fN0.js";import{C as A}from"./CForm-BBna-FOz.js";import{C as T}from"./CAlert-DYx3y8ug.js";import{C as l,a as c}from"./CInputGroupText-C4pmQhFZ.js";import{c as C}from"./cil-user-Ddrdy7PS.js";import{C as u}from"./CFormInput-BvKgY9JV.js";import{c as M,a as G}from"./cil-location-pin-CbvuwBxY.js";var N=j.forwardRef(function(s,m){var o,n=s.children,t=s.as,i=t===void 0?"nav":t,a=s.className,b=s.color,d=s.colorScheme,p=s.container,f=s.expand,y=s.placement,v=E(s,["children","as","className","color","colorScheme","container","expand","placement"]);return x.createElement(i,O({className:R("navbar",(o={},o["bg-".concat(b)]=b,o[typeof f=="boolean"?"navbar-expand":"navbar-expand-".concat(f)]=f,o),y,a)},d&&{"data-coreui-theme":d},v,{ref:m}),p?x.createElement("div",{className:typeof p=="string"?"container-".concat(p):"container"},n):x.createElement(x.Fragment,null,n))});N.propTypes={as:r.elementType,children:r.node,className:r.string,color:w,colorScheme:r.oneOf(["dark","light"]),container:r.oneOfType([r.bool,r.oneOf(["sm","md","lg","xl","xxl","fluid"])]),expand:r.oneOfType([r.bool,r.oneOf(["sm","md","lg","xl","xxl"])]),placement:r.oneOf(["fixed-top","fixed-bottom","sticky-top"])};N.displayName="CNavbar";var g=j.forwardRef(function(s,m){var o=s.children,n=s.as,t=s.className,i=E(s,["children","as","className"]),a=n??(i.href?"a":"span");return x.createElement(a,O({className:R("navbar-brand",t)},i,{ref:m}),o)});g.propTypes={as:r.elementType,children:r.node,className:r.string};g.displayName="CNavbarBrand";const ee=()=>{const[s,m]=j.useState({user_id:"",nombre:"",apellid:"",correo:"",description:"",id_parish:"",address:"",problems_id:""}),[o,n]=j.useState(""),[t,i]=j.useState(""),a=d=>{m({...s,[d.target.name]:d.target.value})},b=async d=>{d.preventDefault(),n(""),i("");try{if((await(await fetch("http://localhost:3001/complaints")).json()).some(q=>q.user_id===s.user_id)){i("The ID has already been used for a complaint.");return}const v={id:s.user_id,user_id:s.user_id,nombre:s.nombre,apellid:s.apellid,correo:s.correo,problems_id:parseInt(s.problems_id),description:s.description,id_parish:parseInt(s.id_parish),address:s.address,status_id:1,complaint_date:new Date().toISOString().split("T")[0]};(await fetch("http://localhost:3001/complaints",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})).ok?(n("Report sent successfully"),m({user_id:"",nombre:"",apellid:"",correo:"",description:"",id_parish:"",address:"",problems_id:""})):i("Error sending the complaint")}catch(p){console.error("Error:",p),i("No se pudo conectar con el servidor")}};return e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"navcom",children:e.jsxs(S,{fluid:!0,children:[e.jsx(g,{children:"Complaints"}),e.jsx(P,{href:"#/login",className:"text-nav",children:"Login"})]})}),e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(S,{children:e.jsx(F,{className:"justify-content-center",children:e.jsx(B,{md:9,lg:7,xl:6,children:e.jsx(L,{className:"mx-4",children:e.jsx(k,{className:"p-4",children:e.jsxs(A,{onSubmit:b,children:[e.jsx("h1",{children:"Send Complaint"}),e.jsx("p",{className:"text-body-secondary",children:"Complete the following fields"}),o&&e.jsx(T,{color:"success",children:o}),t&&e.jsx(T,{color:"danger",children:t}),e.jsxs(l,{className:"mb-3",children:[e.jsx(c,{children:e.jsx(h,{icon:C})}),e.jsx(u,{placeholder:"ID",name:"user_id",value:s.user_id,onChange:a,required:!0})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(c,{children:e.jsx(h,{icon:C})}),e.jsx(u,{placeholder:"first name",name:"nombre",value:s.nombre,onChange:a,required:!0})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(c,{children:e.jsx(h,{icon:C})}),e.jsx(u,{placeholder:"last name",name:"apellid",value:s.apellid,onChange:a,required:!0})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(c,{children:e.jsx(h,{icon:D})}),e.jsx(u,{type:"email",placeholder:"email",name:"correo",value:s.correo,onChange:a,required:!0})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(c,{children:e.jsx(h,{icon:M})}),e.jsx(u,{placeholder:"Problem description",name:"description",value:s.description,onChange:a,required:!0})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(c,{children:e.jsx(h,{icon:G})}),e.jsx(u,{placeholder:"address",name:"address",value:s.address,onChange:a,required:!0})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(c,{children:"Parish"}),e.jsxs(_,{name:"id_parish",value:s.id_parish,onChange:a,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione una parroquia"}),e.jsx("option",{value:"1",children:"San Juan Bautista"}),e.jsx("option",{value:"2",children:"La Concordia"}),e.jsx("option",{value:"3",children:"Pedro María Morantes"}),e.jsx("option",{value:"4",children:"San Sebastián"}),e.jsx("option",{value:"5",children:"Francisco Romero Lobo"})]})]}),e.jsxs(l,{className:"mb-3",children:[e.jsx(c,{children:"type of problem"}),e.jsxs(_,{name:"problems_id",value:s.problems_id,onChange:a,required:!0,children:[e.jsx("option",{value:"",children:"Seleccione un problema"}),e.jsx("option",{value:"1",children:"Brocales"}),e.jsx("option",{value:"2",children:"Alumbrado público"}),e.jsx("option",{value:"3",children:"Asfaltado vial"}),e.jsx("option",{value:"4",children:"Aseo público"}),e.jsx("option",{value:"5",children:"Colectores"}),e.jsx("option",{value:"6",children:"Pavimento rígido"})]})]}),e.jsx("div",{className:"d-grid",children:e.jsx(I,{type:"submit",className:"button_register",children:"Send Complaint"})})]})})})})})})})]})};export{ee as default};
